{"abi":[{"type":"function","name":"createQuery","inputs":[{"name":"surveyId","type":"uint256","internalType":"uint256"},{"name":"params","type":"tuple[][]","internalType":"struct Filter[][]","components":[{"name":"verifier","type":"uint8","internalType":"enum FilterOperator"},{"name":"value","type":"bytes","internalType":"bytes"}]}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"executeQuery","inputs":[{"name":"queryId","type":"uint256","internalType":"uint256"},{"name":"limit","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"executeQuery","inputs":[{"name":"queryId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getQueryData","inputs":[{"name":"queryId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"tuple","internalType":"struct QueryData","components":[{"name":"surveyId","type":"uint256","internalType":"uint256"},{"name":"filters","type":"tuple[][]","internalType":"struct Filter[][]","components":[{"name":"verifier","type":"uint8","internalType":"enum FilterOperator"},{"name":"value","type":"bytes","internalType":"bytes"}]},{"name":"pendingEncryptedResult","type":"uint256","internalType":"euint256"},{"name":"pendingSelectedNumber","type":"uint256","internalType":"euint256"},{"name":"cursor","type":"uint256","internalType":"uint256"},{"name":"isCompleted","type":"bool","internalType":"bool"},{"name":"isValid","type":"bool","internalType":"bool"},{"name":"finalSelectedCount","type":"uint256","internalType":"uint256"},{"name":"finalResult","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"event","name":"QueryCompleted","inputs":[{"name":"queryId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"surveyId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"isValid","type":"bool","indexed":false,"internalType":"bool"},{"name":"finalSelectedCount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"finalResult","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"QueryCreated","inputs":[{"name":"queryId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"surveyId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"analyser","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"error","name":"AlreadyCompletedQuery","inputs":[]},{"type":"error","name":"InvalidQueryId","inputs":[]},{"type":"error","name":"InvalidSurvey","inputs":[]},{"type":"error","name":"UnauthorizePendingQuery","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"createQuery(uint256,(uint8,bytes)[][])":"00653e90","executeQuery(uint256)":"960a4c18","executeQuery(uint256,uint256)":"5600d9ab","getQueryData(uint256)":"c2485ebd"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.28+commit.7893614a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"AlreadyCompletedQuery\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidQueryId\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidSurvey\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"UnauthorizePendingQuery\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"queryId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"surveyId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isValid\",\"type\":\"bool\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"finalSelectedCount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"finalResult\",\"type\":\"uint256\"}],\"name\":\"QueryCompleted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"queryId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"surveyId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"analyser\",\"type\":\"address\"}],\"name\":\"QueryCreated\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"surveyId\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"enum FilterOperator\",\"name\":\"verifier\",\"type\":\"uint8\"},{\"internalType\":\"bytes\",\"name\":\"value\",\"type\":\"bytes\"}],\"internalType\":\"struct Filter[][]\",\"name\":\"params\",\"type\":\"tuple[][]\"}],\"name\":\"createQuery\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"queryId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"limit\",\"type\":\"uint256\"}],\"name\":\"executeQuery\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"queryId\",\"type\":\"uint256\"}],\"name\":\"executeQuery\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"queryId\",\"type\":\"uint256\"}],\"name\":\"getQueryData\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"surveyId\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"enum FilterOperator\",\"name\":\"verifier\",\"type\":\"uint8\"},{\"internalType\":\"bytes\",\"name\":\"value\",\"type\":\"bytes\"}],\"internalType\":\"struct Filter[][]\",\"name\":\"filters\",\"type\":\"tuple[][]\"},{\"internalType\":\"euint256\",\"name\":\"pendingEncryptedResult\",\"type\":\"uint256\"},{\"internalType\":\"euint256\",\"name\":\"pendingSelectedNumber\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cursor\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isCompleted\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isValid\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"finalSelectedCount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"finalResult\",\"type\":\"uint256\"}],\"internalType\":\"struct QueryData\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"createQuery(uint256,(uint8,bytes)[][])\":{\"params\":{\"params\":\"Filters we want to applied on the user metadata.\",\"surveyId\":\"Survey we want to analyse.\"},\"returns\":{\"_0\":\"queryId The id of the query created.\"}},\"executeQuery(uint256)\":{\"details\":\"Helper with a limit of 10.\",\"params\":{\"queryId\":\"Query we want to execute.\"}},\"executeQuery(uint256,uint256)\":{\"params\":{\"limit\":\"Number of item we want to iterate.\",\"queryId\":\"Query we want to execute.\"}},\"getQueryData(uint256)\":{\"params\":{\"queryId\":\"Id of the query.\"},\"returns\":{\"_0\":\"QueryData Data of the query.\"}}},\"version\":1},\"userdoc\":{\"events\":{\"QueryCompleted(uint256,uint256,bool,uint256,uint256)\":{\"notice\":\"In case of \\\"invalid\\\" query, meaning we have not reach the expected threshold number, the `finalSelectedCount` should be equal to 0.\"}},\"kind\":\"user\",\"methods\":{\"createQuery(uint256,(uint8,bytes)[][])\":{\"notice\":\"Create a new analysis.\"},\"executeQuery(uint256)\":{\"notice\":\"Iterate over the query\"},\"executeQuery(uint256,uint256)\":{\"notice\":\"Iterate over the query\"},\"getQueryData(uint256)\":{\"notice\":\"Get the data of the query\"}},\"notice\":\"IAnalyse interface. Analyse workflow: 1. Create/Register a new analyse 2. Iterate over it 3. Before revealing, verify we have reached the expected threshold 4. Reveal or not the result\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/interfaces/IAnalyze.sol\":\"IAnalyze\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=node_modules/@openzeppelin/\",\":fhevm-contracts/=node_modules/fhevm-contracts/\",\":fhevm-core-contracts/=node_modules/fhevm-core-contracts/\",\":fhevm/=node_modules/fhevm/\",\":forge-std/=lib/forge-std/src/\",\":hardhat-deploy/=node_modules/hardhat-deploy/\",\":hardhat/=node_modules/hardhat/\"],\"viaIR\":true},\"sources\":{\"contracts/interfaces/IAnalyze.sol\":{\"keccak256\":\"0x60422e7216ac0e5d5a3e942775627513e0f9fbd2a8fb25dd2328f853e8423b08\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://1b863dda85fdcfcdca5d69d6b33209ec862668b6314d07a91c5f4dbd7d642858\",\"dweb:/ipfs/QmW1F6Tox2eUL4BD8b4jhQEMg5WqCLhEiM6FZCqkUqmaGg\"]},\"contracts/interfaces/IFilter.sol\":{\"keccak256\":\"0xec9dd20e6a68820b957d957ff3052f120d5b7fca77fe0143a4400263ea508aee\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://b9d6df4a25a3ffa63e2c0daf8dc8e63dc0ffef418ea3ee97f6c0d6bd5fdfd40d\",\"dweb:/ipfs/QmTJsf9uCc6yb7cfk62vMLgq1uyeRLdmsEeGkLhxPvVLKo\"]},\"node_modules/fhevm/gateway/GatewayCaller.sol\":{\"keccak256\":\"0xd19fd7715f0c5b479bf0cd8e3108cc8da7deae2d4fc7fb5ab089ebf2d76a0652\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://6386c509464cefe5a41903ca837da46a21b8042d13ccde656158efc48cd70ea8\",\"dweb:/ipfs/QmUn7C6aZwKmEmKsphBshBezXXGZtLMyfaeZAyuZoRsBWU\"]},\"node_modules/fhevm/gateway/lib/Gateway.sol\":{\"keccak256\":\"0x9585a649e3001a4b8768ab6e2597b416f680bcc537309cd50b60e023e9791318\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://a1b055bfb067cc247d4bd60b5f8348f667cbe79717a5753cd6412955277345d0\",\"dweb:/ipfs/QmTveBaQg9GUdtrrxcR4RsiyAEmoEKGL4gn6E1gThR1ph5\"]},\"node_modules/fhevm/lib/Impl.sol\":{\"keccak256\":\"0x89d4968cd956a8931f1a8a177b3bef1c6cf88a03665083db74430add50b88f21\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://aaaef2c82d56dacfb08946842ea1ce26757d13f3251de62fa79222232dfcb43c\",\"dweb:/ipfs/QmQ6QZPxJw9jb3qjRYCX7pMQVoYogjTsYgmdEnB3EnwFRy\"]},\"node_modules/fhevm/lib/TFHE.sol\":{\"keccak256\":\"0x221799c8332f83ab65a0b71746409f0c2c89f1cd8d9ba4091d967c667e1df734\",\"license\":\"BSD-3-Clause-Clear\",\"urls\":[\"bzz-raw://2dba387fbc612a2ee64063b0ee6c27304b3944423d11045acc50abd84577fb5f\",\"dweb:/ipfs/QmThptDGnpd8PuncFk1rnQoCzEqwUED622yC9xZgFhwY59\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.28+commit.7893614a"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"AlreadyCompletedQuery"},{"inputs":[],"type":"error","name":"InvalidQueryId"},{"inputs":[],"type":"error","name":"InvalidSurvey"},{"inputs":[],"type":"error","name":"UnauthorizePendingQuery"},{"inputs":[{"internalType":"uint256","name":"queryId","type":"uint256","indexed":true},{"internalType":"uint256","name":"surveyId","type":"uint256","indexed":true},{"internalType":"bool","name":"isValid","type":"bool","indexed":false},{"internalType":"uint256","name":"finalSelectedCount","type":"uint256","indexed":false},{"internalType":"uint256","name":"finalResult","type":"uint256","indexed":false}],"type":"event","name":"QueryCompleted","anonymous":false},{"inputs":[{"internalType":"uint256","name":"queryId","type":"uint256","indexed":true},{"internalType":"uint256","name":"surveyId","type":"uint256","indexed":true},{"internalType":"address","name":"analyser","type":"address","indexed":false}],"type":"event","name":"QueryCreated","anonymous":false},{"inputs":[{"internalType":"uint256","name":"surveyId","type":"uint256"},{"internalType":"struct Filter[][]","name":"params","type":"tuple[][]","components":[{"internalType":"enum FilterOperator","name":"verifier","type":"uint8"},{"internalType":"bytes","name":"value","type":"bytes"}]}],"stateMutability":"nonpayable","type":"function","name":"createQuery","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"queryId","type":"uint256"},{"internalType":"uint256","name":"limit","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"executeQuery"},{"inputs":[{"internalType":"uint256","name":"queryId","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"executeQuery"},{"inputs":[{"internalType":"uint256","name":"queryId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getQueryData","outputs":[{"internalType":"struct QueryData","name":"","type":"tuple","components":[{"internalType":"uint256","name":"surveyId","type":"uint256"},{"internalType":"struct Filter[][]","name":"filters","type":"tuple[][]","components":[{"internalType":"enum FilterOperator","name":"verifier","type":"uint8"},{"internalType":"bytes","name":"value","type":"bytes"}]},{"internalType":"euint256","name":"pendingEncryptedResult","type":"uint256"},{"internalType":"euint256","name":"pendingSelectedNumber","type":"uint256"},{"internalType":"uint256","name":"cursor","type":"uint256"},{"internalType":"bool","name":"isCompleted","type":"bool"},{"internalType":"bool","name":"isValid","type":"bool"},{"internalType":"uint256","name":"finalSelectedCount","type":"uint256"},{"internalType":"uint256","name":"finalResult","type":"uint256"}]}]}],"devdoc":{"kind":"dev","methods":{"createQuery(uint256,(uint8,bytes)[][])":{"params":{"params":"Filters we want to applied on the user metadata.","surveyId":"Survey we want to analyse."},"returns":{"_0":"queryId The id of the query created."}},"executeQuery(uint256)":{"details":"Helper with a limit of 10.","params":{"queryId":"Query we want to execute."}},"executeQuery(uint256,uint256)":{"params":{"limit":"Number of item we want to iterate.","queryId":"Query we want to execute."}},"getQueryData(uint256)":{"params":{"queryId":"Id of the query."},"returns":{"_0":"QueryData Data of the query."}}},"version":1},"userdoc":{"kind":"user","methods":{"createQuery(uint256,(uint8,bytes)[][])":{"notice":"Create a new analysis."},"executeQuery(uint256)":{"notice":"Iterate over the query"},"executeQuery(uint256,uint256)":{"notice":"Iterate over the query"},"getQueryData(uint256)":{"notice":"Get the data of the query"}},"version":1}},"settings":{"remappings":["@openzeppelin/=node_modules/@openzeppelin/","fhevm-contracts/=node_modules/fhevm-contracts/","fhevm-core-contracts/=node_modules/fhevm-core-contracts/","fhevm/=node_modules/fhevm/","forge-std/=lib/forge-std/src/","hardhat-deploy/=node_modules/hardhat-deploy/","hardhat/=node_modules/hardhat/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/interfaces/IAnalyze.sol":"IAnalyze"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"contracts/interfaces/IAnalyze.sol":{"keccak256":"0x60422e7216ac0e5d5a3e942775627513e0f9fbd2a8fb25dd2328f853e8423b08","urls":["bzz-raw://1b863dda85fdcfcdca5d69d6b33209ec862668b6314d07a91c5f4dbd7d642858","dweb:/ipfs/QmW1F6Tox2eUL4BD8b4jhQEMg5WqCLhEiM6FZCqkUqmaGg"],"license":"BSD-3-Clause-Clear"},"contracts/interfaces/IFilter.sol":{"keccak256":"0xec9dd20e6a68820b957d957ff3052f120d5b7fca77fe0143a4400263ea508aee","urls":["bzz-raw://b9d6df4a25a3ffa63e2c0daf8dc8e63dc0ffef418ea3ee97f6c0d6bd5fdfd40d","dweb:/ipfs/QmTJsf9uCc6yb7cfk62vMLgq1uyeRLdmsEeGkLhxPvVLKo"],"license":"BSD-3-Clause-Clear"},"node_modules/fhevm/gateway/GatewayCaller.sol":{"keccak256":"0xd19fd7715f0c5b479bf0cd8e3108cc8da7deae2d4fc7fb5ab089ebf2d76a0652","urls":["bzz-raw://6386c509464cefe5a41903ca837da46a21b8042d13ccde656158efc48cd70ea8","dweb:/ipfs/QmUn7C6aZwKmEmKsphBshBezXXGZtLMyfaeZAyuZoRsBWU"],"license":"BSD-3-Clause-Clear"},"node_modules/fhevm/gateway/lib/Gateway.sol":{"keccak256":"0x9585a649e3001a4b8768ab6e2597b416f680bcc537309cd50b60e023e9791318","urls":["bzz-raw://a1b055bfb067cc247d4bd60b5f8348f667cbe79717a5753cd6412955277345d0","dweb:/ipfs/QmTveBaQg9GUdtrrxcR4RsiyAEmoEKGL4gn6E1gThR1ph5"],"license":"BSD-3-Clause-Clear"},"node_modules/fhevm/lib/Impl.sol":{"keccak256":"0x89d4968cd956a8931f1a8a177b3bef1c6cf88a03665083db74430add50b88f21","urls":["bzz-raw://aaaef2c82d56dacfb08946842ea1ce26757d13f3251de62fa79222232dfcb43c","dweb:/ipfs/QmQ6QZPxJw9jb3qjRYCX7pMQVoYogjTsYgmdEnB3EnwFRy"],"license":"BSD-3-Clause-Clear"},"node_modules/fhevm/lib/TFHE.sol":{"keccak256":"0x221799c8332f83ab65a0b71746409f0c2c89f1cd8d9ba4091d967c667e1df734","urls":["bzz-raw://2dba387fbc612a2ee64063b0ee6c27304b3944423d11045acc50abd84577fb5f","dweb:/ipfs/QmThptDGnpd8PuncFk1rnQoCzEqwUED622yC9xZgFhwY59"],"license":"BSD-3-Clause-Clear"}},"version":1},"id":3}